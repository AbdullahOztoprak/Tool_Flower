<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Add Tool - Tool Flower</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
body {
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  background: linear-gradient(135deg, #f8ffae, #43c6ac);
  margin: 0;
  padding: 0;
  color: #333;
}
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 50px;
  position: sticky;
  top: 0;
  background-color: rgba(255,255,255,0.9);
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
  z-index: 999;
}
.logo {
  display: flex;
  align-items: center;
  font-size: 1.8em;
  font-weight: bold;
  letter-spacing: 2px;
  color: #43c6ac;
  background: none;
  border: none;
  box-shadow: none;
  padding: 0;
  margin: 0;
  cursor: pointer;
  outline: none;
  transition: color 0.2s, text-shadow 0.2s;
}
.logo span {
  margin-right: 10px;
}

.logo:focus, .logo:hover {
  color: #2d8f7b;
  text-shadow: 0 2px 8px #43c6ac44;
  outline: none;
}
.nav-buttons button {
  background-color: #43c6ac;
  border: none;
  margin-left: 10px;
  padding: 10px 16px;
  border-radius: 6px;
  cursor: pointer;
  color: #fff;
  font-weight: 600;
  transition: all 0.3s;
}
.nav-buttons button:hover {
  background: #f8ffae;
  color: #43c6ac;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
.add-tool-container {
  max-width: 500px;
  margin: 60px auto;
  background: #fff;
  border-radius: 20px;
  box-shadow: 0 8px 32px 0 rgba(31,38,135,0.17);
  padding: 40px 30px;
}
.add-tool-title {
  color: #43c6ac;
  font-size: 2em;
  margin-bottom: 20px;
  text-align: center;
}
.add-tool-form label {
  display: block;
  margin-bottom: 8px;
  font-weight: 600;
  color: #222;
}
.add-tool-form input, .add-tool-form textarea {
  width: 100%;
  padding: 12px;
  margin-bottom: 18px;
  border: none;
  border-radius: 8px;
  background: #f0f0f0;
  font-size: 16px;
}
.add-tool-form button {
  width: 100%;
  padding: 14px;
  background: #43c6ac;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
  font-weight: 600;
  margin-top: 10px;
  transition: background 0.3s;
}
.add-tool-form button:hover {
  background: #f8ffae;
  color: #43c6ac;
}
.success-msg {
  color: #43c6ac;
  margin-top: 15px;
  font-size: 15px;
  text-align: center;
}
</style>
</head>
<body>
<div class="header">
  <button class="logo" onclick="window.location.href='home.html'">
    <span style="font-size:1.5em; margin-right:10px;">ðŸŒ¸</span> Tool Flower
  </button>
  <div class="nav-buttons">
    <button onclick="window.location.href='home.html'">Home</button>
    <button onclick="window.location.href='profile.html'">Profile</button>
    <button onclick="window.location.href='login.html'">Logout</button>
  </div>
</div>
<!-- Return button moved to white box, icon only -->
<div class="add-tool-container">
  <div style="display:flex;align-items:center;justify-content:flex-start;position:relative;">
    <button onclick="window.history.back()" id="returnBtn" style="background:#f8ffae;color:#43c6ac;border:none;border-radius:50%;padding:3px 7px;font-weight:600;cursor:pointer;font-size:1.1em;box-shadow:0 1px 4px #43c6ac22;min-width:28px;min-height:28px;display:flex;align-items:center;justify-content:center;">
      <i class="fa fa-arrow-left"></i>
    </button>
  </div>
  <button onclick="window.history.back()" style="position:absolute;left:20px;top:20px;background:#f8ffae;color:#43c6ac;border:none;border-radius:6px;padding:8px 18px;font-weight:600;cursor:pointer;z-index:10;">&#8592; Return</button>
  <div class="add-tool-title">Add a New Tool</div>
  <form class="add-tool-form" id="toolForm">
    <label for="toolName">Tool Name</label>
    <input type="text" id="toolName" required placeholder="Enter tool name" />
    <label for="toolDesc">Description</label>
    <textarea id="toolDesc" rows="3" required placeholder="Describe your tool"></textarea>
    <label for="scriptSource">Script Source</label>
    <select id="scriptSource" required>
      <option value="code.siemens">code.siemens</option>
      <option value="github">GitHub</option>
      <option value="upload">Upload File</option>
      <option value="custom">Write Script</option>
    </select>
    <div id="gitFields">
      <label for="repoUrl">Repository URL</label>
      <input type="text" id="repoUrl" placeholder="e.g. https://code.siemens.com/your/repo.git" />
      <label for="repoPath">Script Path in Repo</label>
      <input type="text" id="repoPath" placeholder="e.g. setup.sh" />
    </div>
    <div id="uploadField" style="display:none;">
      <label for="scriptFile">Upload Script File</label>
      <input type="file" id="scriptFile" accept=".sh,.py,.pl,.rb,.js,.bat,.ps1,.txt" />
    </div>
    <div id="customField" style="display:none;">
      <label for="customScript">Write Script</label>
      <textarea id="customScript" rows="6" placeholder="#!/bin/bash\necho Hello"></textarea>
    </div>
    <button type="submit">Add Tool</button>
  </form>
  <div id="successMsg" class="success-msg"></div>
</div>
<script>
// Save tool to localStorage
function getTools() {
  return JSON.parse(localStorage.getItem('toolFlowerTools') || '[]');
}
function saveTools(tools) {
  localStorage.setItem('toolFlowerTools', JSON.stringify(tools));
}

// Show/hide fields based on script source
const scriptSource = document.getElementById('scriptSource');
const gitFields = document.getElementById('gitFields');
const uploadField = document.getElementById('uploadField');
const customField = document.getElementById('customField');
scriptSource.addEventListener('change', function() {
  const repoUrlInput = document.getElementById('repoUrl');
  if (this.value === 'code.siemens') {
    gitFields.style.display = '';
    uploadField.style.display = 'none';
    customField.style.display = 'none';
    repoUrlInput.placeholder = 'e.g. https://code.siemens.com/your/repo.git';
  } else if (this.value === 'github') {
    gitFields.style.display = '';
    uploadField.style.display = 'none';
    customField.style.display = 'none';
    repoUrlInput.placeholder = 'e.g. https://github.com/your/repo.git';
  } else if (this.value === 'upload') {
    gitFields.style.display = 'none';
    uploadField.style.display = '';
    customField.style.display = 'none';
  } else if (this.value === 'custom') {
    gitFields.style.display = 'none';
    uploadField.style.display = 'none';
    customField.style.display = '';
  }
});
// Default to gitFields
gitFields.style.display = '';
uploadField.style.display = 'none';
customField.style.display = 'none';
document.getElementById('repoUrl').placeholder = 'e.g. https://code.siemens.com/your/repo.git';

document.getElementById('toolForm').addEventListener('submit', function(e) {
  e.preventDefault();
  const name = document.getElementById('toolName').value.trim();
  const desc = document.getElementById('toolDesc').value.trim();
  const source = scriptSource.value;
  const repoUrl = document.getElementById('repoUrl').value.trim();
  const repoPath = document.getElementById('repoPath').value.trim();
  const customScript = document.getElementById('customScript').value.trim();
  const scriptFile = document.getElementById('scriptFile').files[0];
  if (!name || !desc) return;
  // Generate a unique id for the tool
  const id = 'tool_' + Date.now() + '_' + Math.floor(Math.random() * 100000);
  let tool = { id, name, desc, source, repoUrl, repoPath, customScript };
  // Save file name if uploaded
  if (source === 'upload' && scriptFile) {
    tool.uploadedFileName = scriptFile.name;
    // Optionally, you could save the file content as base64 if needed
  }
  const tools = getTools();
  tools.push(tool);
  saveTools(tools);
  document.getElementById('successMsg').textContent = 'Tool added successfully!';
  document.getElementById('toolForm').reset();
  // Reset fields to default
  gitFields.style.display = '';
  uploadField.style.display = 'none';
  customField.style.display = 'none';
  document.getElementById('repoUrl').placeholder = 'e.g. https://code.siemens.com/your/repo.git';
});
</script>
</body>
</html>
